!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.aemReactEditableComponents=t():e.aemReactEditableComponents=t()}(function(){try{return"undefined"!=typeof self}catch(e){return!1}}()?self:this,(()=>(()=>{var e={906:function(e){(function(){try{return"undefined"!=typeof self}catch(e){return!1}})()&&self,e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};let n;e.r(t),e.d(t,{ComponentMapping:()=>a,MapTo:()=>r});class a{constructor(){return n||(n=this),n}static get instance(){return new this}map(e,t){a.map(e,t)}static map(e,t){e&&t&&("string"==typeof e?[e]:e).forEach((e=>{this.mapping[e]=t}))}lazyMap(e,t){a.lazyMap(e,t)}static lazyMap(e,t){e&&t&&("string"==typeof e?[e]:e).forEach((e=>{this.lazyMapping[e]=t}))}get(e){return a.get(e)}static get(e){return this.mapping[e]}getLazy(e){return a.getLazy(e)}static getLazy(e){return this.lazyMapping[e]?this.lazyMapping[e]():Promise.reject("resourceType "+e+" not found in mappings!")}}a.mapping={},a.lazyMapping={};const r=e=>t=>a.instance.map(e,t);return t})()},967:(e,t)=>{"use strict";t.Nm=t.Rq=void 0;var n=/^([^\w]*)(javascript|data|vbscript)/im,a=/&#(\w+)(^\w|;)?/g,r=/&(newline|tab);/gi,o=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,s=/^.+(:|&colon;)/gim,c=[".","/"];t.Rq="about:blank",t.Nm=function(e){if(!e)return t.Rq;var l,i=(l=e,l.replace(o,"").replace(a,(function(e,t){return String.fromCharCode(t)}))).replace(r,"").replace(o,"").trim();if(!i)return t.Rq;if(function(e){return c.indexOf(e[0])>-1}(i))return i;var p=i.match(s);if(!p)return i;var m=p[0];return n.test(m)?t.Rq:i}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";n.r(a),n.d(a,{Container:()=>O,EditableComponent:()=>C,MapTo:()=>o,Page:()=>v,ResponsiveGrid:()=>R,fetchModel:()=>P,getChildComponents:()=>f});var e=n(906);const t=e.ComponentMapping.map,r=e.ComponentMapping.get;e.ComponentMapping.map=function(n,a){return t.call(e.ComponentMapping,n,a),a},e.ComponentMapping.get=r;const o=t=>n=>e.ComponentMapping.map(t,n),s=require("react");var c=n.n(s),l=n(967);const i={modelToProps(e){if(!e||!Object.keys(e).length)return{cqPath:""};const t=Object.getOwnPropertyNames(e),n={};return t.forEach((t=>{const a=t.startsWith(":")?function(e){const t=e.substring(1);return"cq"+t.substring(0,1).toUpperCase()+t.substring(1)}(t):t;n[a]=e[t]||""})),n},getCQPath(e){const{pagePath:t="",itemPath:n="",cqPath:a=""}=e;return t&&!a?(0,l.Nm)(n?`${t}/jcr:content/${n}`:t).replace(/\/+/g,"/").replace(/\/$/,""):a}},p=require("@adobe/aem-spa-page-model-manager"),m=Object.freeze({DATA_PATH_ATTR:"data-cq-data-path",DATA_CQ_RESOURCE_TYPE_ATTR:"data-cq-resource-type",ASYNC_CONTENT_LOADED_EVENT:"cq-async-content-loaded",_WCM_MODE_META_SELECTOR:'meta[property="cq:wcmmode"]',TYPE:p.Constants.TYPE_PROP,ITEMS:p.Constants.ITEMS_PROP,ITEMS_ORDER:p.Constants.ITEMS_ORDER_PROP,PATH:p.Constants.PATH_PROP,CHILDREN:p.Constants.CHILDREN_PROP,HIERARCHY_TYPE:p.Constants.HIERARCHY_TYPE_PROP,JCR_CONTENT:p.Constants.JCR_CONTENT}),d=Object.freeze({DEFAULT:"appliedCssClassNames",NEW_SECTION:"new section",CONTAINER:"aem-container",DEFAULT_PLACEHOLDER:"cq-placeholder",PAGE:"aem-page",RESPONSIVE_GRID_PLACEHOLDER:"aem-Grid-newComponent",ALLOWED_LIST_PLACEHOLDER:"aem-AllowedComponent--list",ALLOWED_COMPONENT_TITLE:"aem-AllowedComponent--title",ALLOWED_COMPONENT_PLACEHOLDER:"aem-AllowedComponent--component cq-placeholder placeholder",RESPONSIVE_GRID_PLACEHOLDER_CLASS_NAMES:"aem-Grid-newComponent"});var u=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const E=e=>{var{cqItemsOrder:t,cqItems:n,cqPath:a="",getItemClassNames:r,isPage:o,removeDefaultStyles:s}=e,l=u(e,["cqItemsOrder","cqItems","cqPath","getItemClassNames","isPage","removeDefaultStyles"]);return t&&n&&t.length?c().createElement(c().Fragment,null,f(Object.assign({cqItemsOrder:t,cqItems:n,cqPath:a,getItemClassNames:r,isPage:o,removeDefaultStyles:s},l))):c().createElement(c().Fragment,null)},f=t=>{var{cqItemsOrder:n=[],cqItems:a={},cqPath:r="",getItemClassNames:o,isPage:s,removeDefaultStyles:l,isInEditor:d=p.AuthoringUtils.isInEditor()}=t;const E=u(t,["cqItemsOrder","cqItems","cqPath","getItemClassNames","isPage","removeDefaultStyles","isInEditor"]).componentMapping||e.ComponentMapping,f=[];return n.forEach((e=>{const t=i.modelToProps(a[e]),n=o&&o(e)||"";if(t&&t.cqType){const a=E.get(t.cqType),o=((e,t,n=!1)=>{let a=t;return e&&(a=n?`${e}/${m.JCR_CONTENT}/${t}`:`${e}/${t}`),a})(r,e,s);a?f.push(c().createElement(a,{key:o,model:t,cqPath:o,isInEditor:d,componentMapping:E,className:n,removeDefaultStyles:l})):console.error("Component not mapped for resourcetype:",t.cqType)}})),f},O=e=>{const{cqPath:t="",className:n="",isPage:a=!1,isInEditor:r=p.AuthoringUtils.isInEditor(),childPages:s,placeholderClassNames:l="",components:i,model:u={}}=e;if(i&&Object.keys(i).length)for(const e in i)o(e)(i[e]);const f=r&&{[m.DATA_PATH_ATTR]:t}||{},O=c().createElement(E,Object.assign({},u,e));return r?c().createElement("div",Object.assign({className:n||d.CONTAINER},f),O,s,!a&&r&&c().createElement("div",{"data-cq-data-path":`${t}/*`,className:`${d.NEW_SECTION} ${l}`})):c().createElement("div",{className:n},O,s)},g=Object.freeze({ASYNC_CONTENT_LOADED_EVENT:"cq-async-content-loaded"});var y=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function s(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}l((a=a.apply(e,t||[])).next())}))};function P({cqPath:e,forceReload:t=!1,pagePath:n,itemPath:a,host:r,options:o}){return y(this,void 0,void 0,(function*(){let s,c={};if(e||n){const m=e&&(0,l.Nm)(e)||i.getCQPath({pagePath:n,itemPath:a});if(r){const e=(0,l.Nm)(`${r}/${m}`).replace(/\/+/g,"/"),t=yield fetch(`${e}.model.json`,o);t.ok&&(s=yield t.json())}else s=yield p.ModelManager.getData({path:m,forceReload:t}).catch((e=>console.error(e)));s&&Object.keys(s).length&&(c=i.modelToProps(s))}return c}))}const h=e=>{var{config:t}=e,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["config"]);const{emptyLabel:a="",isEmpty:r}=t||{},o={};return"function"==typeof r&&r(n)&&Object.assign(o,{className:d.DEFAULT_PLACEHOLDER,"data-emptytext":a}),c().createElement("div",Object.assign({},o))};const C=e=>{var t;const{config:n={isEmpty:()=>!1},children:a,model:r,cqPath:o,pagePath:l,itemPath:d,isInEditor:u=p.AuthoringUtils.isInEditor(),className:E=""}=e,f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["config","children","model","cqPath","pagePath","itemPath","isInEditor","className"]),{updateModel:O}={updateModel:(0,s.useCallback)((({path:e,forceReload:t,pagePath:n,setModel:a,isInEditor:r})=>{return o=void 0,s=void 0,l=function*(){const o=yield P({cqPath:e,forceReload:t,pagePath:n}).catch((e=>console.error(e)));o&&Object.keys(o).length&&(a(o),r&&p.PathUtils.dispatchGlobalCustomEvent(g.ASYNC_CONTENT_LOADED_EVENT,{}))},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function a(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof c?r:new c((function(e){e(r)}))).then(n,a)}r((l=l.apply(o,s||[])).next())}));var o,s,c,l}),[])},{forceReload:y,resourceType:C=""}=n||{},b=o||i.getCQPath({cqPath:o,pagePath:l,itemPath:d}),[T,v]=c().useState((()=>r||{}));if(c().useEffect((()=>{v(null!=r?r:{})}),[b,r]),c().useEffect((()=>{var e;const t=()=>O({path:b,forceReload:y,setModel:v,isInEditor:u,pagePath:l});return!(null===(e=Object.keys(T))||void 0===e?void 0:e.length)&&t(),p.ModelManager.addListener(b,t),()=>{p.ModelManager.removeListener(b,t)}}),[b,T,O,u,l,y]),!e)return c().createElement(c().Fragment,null);const N=Object.assign({cqPath:b},T),_=u&&{[m.DATA_PATH_ATTR]:b,[m.DATA_CQ_RESOURCE_TYPE_ATTR]:C}||{},{appliedCssClassNames:I=""}=T,A=`${E} ${(null===(t=f.containerProps)||void 0===t?void 0:t.className)||""} ${I}`.trim(),j=((e,t)=>c().isValidElement(e)?c().cloneElement(e,t):e)(a,l?N:T);return u||!f.removeDefaultStyles&&A?c().createElement("div",Object.assign({className:A},_),j,u&&c().createElement(h,Object.assign({config:n},N))):c().createElement(c().Fragment,null,j)};var b=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const T=t=>{var{cqChildren:n}=t,a=b(t,["cqChildren"]);const r=a.componentMapping||e.ComponentMapping;if(!n)return c().createElement(c().Fragment,null);const o=[];return Object.keys(n).forEach((e=>{const t=i.modelToProps(n[e]),{cqPath:s,cqType:l}=t;if(l){const e=r.get(l);e?o.push(c().createElement(e,{model:t,key:s,cqPath:s,isInEditor:a.isInEditor})):console.error("Component not mapped for resourcetype:",l)}})),c().createElement(c().Fragment,null,o)},v=e=>{var{className:t}=e,n=b(e,["className"]);return c().createElement(C,Object.assign({},n),c().createElement(O,Object.assign({className:`${d.PAGE} ${t||""}`,isPage:!0,childPages:c().createElement(T,Object.assign({},n))},n)))},N=Object.freeze({EMPTY_LABEL:"No allowed components",EMPTY_COMPONENT_TITLE:"–"}),_=e=>{const{placeholderClassNames:t="",allowedComponents:n,title:a}=e,{components:r}=n,o=r&&r.length>0?a:N.EMPTY_LABEL;return c().createElement("div",{className:`${d.ALLOWED_LIST_PLACEHOLDER} ${d.NEW_SECTION} ${t}`},c().createElement("div",{"data-text":o,className:d.ALLOWED_COMPONENT_TITLE}),r.map((e=>c().createElement("div",{"data-cq-data-path":e.path,key:e.path,"data-emptytext":e.title?e.title:N.EMPTY_COMPONENT_TITLE,className:d.ALLOWED_COMPONENT_PLACEHOLDER}))))};var I=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const A="wcm/foundation/components/responsivegrid",j=e=>{var t,{title:n="Layout Container",columnClassNames:a,isInEditor:r}=e,o=I(e,["title","columnClassNames","isInEditor"]);let s=o.customClassName||"";!r&&o.removeDefaultStyles||(s=`${s} ${o.gridClassNames||""} ${d.CONTAINER}`);const l=Object.assign(Object.assign({},o),{className:s,getItemClassNames:e=>a&&a[e]?a[e]:"",placeholderClassNames:d.RESPONSIVE_GRID_PLACEHOLDER_CLASS_NAMES,isInEditor:r});return(null===(t=o.allowedComponents)||void 0===t?void 0:t.applicable)&&r?c().createElement(_,Object.assign({},l,{title:n})):c().createElement(O,Object.assign({},l))},R=e=>{var{isInEditor:t=p.AuthoringUtils.isInEditor()}=e,n=I(e,["isInEditor"]);const a={isEmpty:e=>e.cqItemsOrder&&e.cqItemsOrder.length>0||!1,resourceType:A};return c().createElement(C,Object.assign({config:a},n),c().createElement(j,Object.assign({},n,{isInEditor:t})))};o(A)(R)})(),a})()));